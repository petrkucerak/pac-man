<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="md__c___users__petr__documents_apo_semestralka__tech_documentation" kind="page">
    <compoundname>md_C__Users_Petr_Documents_apo_semestralka__tech_documentation</compoundname>
    <title>Technická dokumentace</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<sect1 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md1">
<title>Architektura aplikace</title>
<para>Soubory programu jsou děleny dle funkčnosti. Podrobnjěí informace s popisem jednotlivých souborů, metod, funkcí, struktur, proměných a maker je možné dohledat v dokumentaci v sekci: <ulink url="files.html">Files</ulink>.</para>
<para>Aplikace je vytvořena pro MicroZed based MZ_APO board designed by Petr Porazil at <ulink url="http://www.pikron.com/">PiKRON</ulink>.</para>
<para>Aplikace vychází z šablony <ulink url="https://gitlab.fel.cvut.cz/b35apo/mzapo_template">mzapo_template</ulink>.</para>
</sect1>
<sect1 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md2">
<title>Blokové schéma algoritmu</title>
<para>Blokové schéma popisuje fungování algoritmu hry Pac-Man.</para>
<para><image type="html" name="https://raw.githubusercontent.com/petrkucerak/library/main/asstes/share/blok-schema.png" alt="block-schema" inline="yes"></image>
</para>
<para>Obecně si ho můžeme rozdělit do třech částí:</para>
<para><orderedlist>
<listitem><para>konfigurace dané hry (Main menu)</para>
</listitem><listitem><para>hra samotná (Game)</para>
</listitem><listitem><para>výpis skóre a pauza (Dispaly score, Pause)</para>
</listitem></orderedlist>
</para>
</sect1>
<sect1 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md3">
<title>Popis kompilace a spuštění programu</title>
<para>Pro kompliaci programu je připravený Makefile i s předpřipraveným připojením přes <emphasis>ProxyJump</emphasis> do školní sítě a s možností se připojit rovnou na zařízení.</para>
<para>Makefile vychází z šablony <ulink url="https://gitlab.fel.cvut.cz/b35apo/mzapo_template">mzapo_template</ulink>.</para>
<sect2 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md4">
<title>Nastavení Makefilu</title>
<para>Podrobné informace o způsobech připojení a detailního využití připraveného Makefilu je možné dohledat v dokumnetaci předmětu: <ulink url="https://cw.fel.cvut.cz/wiki/courses/b35apo/documentation/mz_apo-howto/start">https://cw.fel.cvut.cz/wiki/courses/b35apo/documentation/mz_apo-howto/start</ulink>.</para>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md5">
<title>Flagy a podrobnosti kompilace</title>
<para>Program je kompilován gcc kompilátorem s následujícími flagy.</para>
<para><programlisting filename=".Makefile"><codeline><highlight class="normal">CC<sp/>=<sp/>arm-linux-gnueabihf-gcc</highlight></codeline>
<codeline><highlight class="normal">CXX<sp/>=<sp/>arm-linux-gnueabihf-g++</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">CPPFLAGS<sp/>=<sp/>-I<sp/>.</highlight></codeline>
<codeline><highlight class="normal">CFLAGS<sp/>=-g<sp/>-std=gnu99<sp/>-O1<sp/>-Wall</highlight></codeline>
<codeline><highlight class="normal">CXXFLAGS<sp/>=<sp/>-g<sp/>-std=gnu++11<sp/>-O1<sp/>-Wall</highlight></codeline>
<codeline><highlight class="normal">LDFLAGS<sp/>=<sp/>-lrt<sp/>-lpthread<sp/>-pthread</highlight></codeline>
</programlisting></para>
<para>Ke kompilaci na Ubuntu/Debina systému je třeba mít naistalovaný křížový kompilátor. <programlisting filename=".bash"><codeline><highlight class="normal">sudo<sp/>apt<sp/>install<sp/>crossbuild-essential-armhf</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md6">
<title>Zdrojové soubory</title>
<para>Pokud budete upravovat nejaky ze souboru nebo prodavat vlastni, je třeba mít přidané všechny soubory ke kompilaci.</para>
<para><programlisting filename=".Makefile"><codeline><highlight class="normal">SOURCES<sp/>=<sp/>apoman.c<sp/>mzapo_phys.c<sp/>mzapo_parlcd.c<sp/>update_peripherals.c<sp/>text_fb.c<sp/>map_from_template.c<sp/>map_to_fb.c<sp/>draw_shapes.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>terminal_read.c<sp/>pacman.c<sp/>ghost.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>font_prop14x16.c<sp/>font_rom8x16.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>map_circles.c<sp/>map_conch.c<sp/>map_star.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>menu_utilities.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>final_score.c</highlight></codeline>
<codeline><highlight class="normal">SOURCES<sp/>+=<sp/>game.c</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md7">
<title>Cílový binární soubor</title>
<para>Název výsledného binárního osuboru je udáván tímot řádkem: <programlisting filename=".Makefile"><codeline><highlight class="normal">TARGET_EXE<sp/>=<sp/>apoman</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md8">
<title>Propojení se zařízením při kompilaci</title>
<para>Způsobů, jak pracovat se zařízeními je mnoho. My doporučujeme využít tzv. Prozyjumpu, který jsme během vývoje používali. Pojďme si představit jednotlivé doporučené přítupy.</para>
<para>Rád bych upozornil, že tato část je rychlým srhnutí poskytnuté dokumentace dostupné na stránkách předmětu (<ulink url="https://cw.fel.cvut.cz/wiki/courses/b35apo/documentation/mz_apo-howto/start">https://cw.fel.cvut.cz/wiki/courses/b35apo/documentation/mz_apo-howto/start</ulink>).</para>
<sect4 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md9">
<title>1. Propojení pomocí &lt;em&gt;ProxyJump&lt;/em&gt;</title>
<para>Prvním způsobem je propojit se přes tzv. <emphasis>ProxyJump</emphasis>. Je vhodné rovnou do Makefilu vyplnit cílovou IP adresu zařízení <programlisting filename=".Makefile"><codeline><highlight class="normal">TARGET_IP<sp/>?=<sp/>192.168.202.xxx</highlight></codeline>
</programlisting> a vyplnit své uživatelské jméno s přístupem k ssh klíči (k školnímu serveru). <programlisting filename=".Makefile"><codeline><highlight class="normal">SSH_OPTIONS=<sp/>-i<sp/>~/.ssh/mzapo-root-key<sp/>-o<sp/>&apos;ProxyJump=username@postel.felk.cvut.cz&apos;</highlight></codeline>
</programlisting> Předejte tak zbytečnému zablokování ze strany školního serveru při opakovaném a častém připojování a přístup pro vás bude snazší.</para>
</sect4>
<sect4 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md10">
<title>2. Využití SSH tunelu do lokální sítě laboratoře</title>
<para>Další možností připojení je využít trvalé SSH spojení na server <computeroutput>postel.felk.cvut.cz</computeroutput>. Tento způsob zaručí, že je menší riziko, aby naše připojení bylo vyhodnoceno ochranou serveru jako útok. Opětovaná připojovaání jsou tak tedy mnohem rychlejší.</para>
<para>Tunel vytvoříme příkazem <programlisting filename=".bash"><codeline><highlight class="normal">ssh<sp/>-nNT<sp/>ctu_login@postel.felk.cvut.cz<sp/>-L<sp/>2222:192.168.202.xxx:22</highlight></codeline>
</programlisting></para>
<para>A v Makefilu je třeba povolit řádku s následujícími příkazy: <programlisting filename=".Makefile"><codeline><highlight class="normal">TARGET_IP<sp/>=<sp/>127.0.0.1</highlight></codeline>
<codeline><highlight class="normal">SSH_OPTIONS=-o<sp/>&quot;UserKnownHostsFile=/dev/null&quot;<sp/>-o<sp/>&quot;StrictHostKeyChecking=no&quot;<sp/>-o<sp/>&quot;Port=2222&quot;</highlight></codeline>
<codeline><highlight class="normal">SSH_GDB_TUNNEL_REQUIRED=y</highlight></codeline>
</programlisting></para>
</sect4>
<sect4 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md11">
<title>3. Připojení se přes PC v laboratoři</title>
<para>Třetím možným způsobem je se připojit na školní PC, který je ve stejné sítit jako používaný přípavek.</para>
<para>Zde stačí pouze zavolat příkaz, který nám kód zkompiluje a rovnou spustí na zařízení s danou IP adresou: <programlisting filename=".bash"><codeline><highlight class="normal">make<sp/>TARGET_IP=192.168.202.xx<sp/>run</highlight></codeline>
</programlisting></para>
</sect4>
</sect3>
</sect2>
<sect2 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md12">
<title>Důležité příkazy</title>
<para>Další částí Makefilu jsou příkazy, které lze při práci s aplikací využít. Pojďme si představit ty nejvíce zajímavé.</para>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md13">
<title>Kompilace</title>
<para><programlisting filename=".bash"><codeline><highlight class="normal">make</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md14">
<title>Vymazání objektových a zkompilovaných souborů</title>
<para><programlisting filename=".bash"><codeline><highlight class="normal">make<sp/>clean</highlight></codeline>
</programlisting></para>
</sect3>
<sect3 id="md__c___users__petr__documents_apo_semestralka__tech_documentation_1autotoc_md15">
<title>Kompilace a zároveň spuštění dle konfigurace Makefilu</title>
<para><programlisting filename=".bash"><codeline><highlight class="normal">make<sp/>run</highlight></codeline>
</programlisting> </para>
</sect3>
</sect2>
</sect1>
    </detaileddescription>
    <location file="C:/Users/Petr/Documents/apo_semestralka/_tech_documentation.md"/>
  </compounddef>
</doxygen>
